{% load power_tags %}
{% load character_tags %}

{% with main_modal_art_url as modal_art_url %}
  {% include "powers/stock_powers_modal.html" %}
{% endwith %}

{% include "powers/ps2_create_pages/tutorial/tutorial_modals.html" %}

<div class="container">
  <div class="backdropped">
    <div class="css-desktop visible-md-block visible-lg-block visible-xl-block">
      <div >
        <h1 style="margin-bottom: 15px;">
          {% if rewarding_character %}
          Select a Stock Gift for {{rewarding_character.name}}
          {% else %}
          Stock Gifts
            <small>Example Gifts to take and customize</small>
            <button type="button" class="btn btn-default btn-xs " data-toggle="modal" data-target="#mainTutorialModal">
              Help
            </button>
          {% endif %}
        </h1>
      </div>

      <div class="row no-gutters ">
        <div class="tabbable tabs-left">
          <div class="css-sidebar">

          <ul class="nav nav-tabs">
            {% for category, power_list in generic_powers_by_category.items %}
            <li role="presentation" class="{% if forloop.counter0 == 0 %}active{% endif %}">
              <a href="#{{category.slug}}" aria-controls="{{category.slug}}" role="tab" data-toggle="tab">
                <h4>{{category.name}}
                  <br>
                  <small>{{category.description}}</small>
                </h4>
              </a>
            </li>
            {% endfor %}
          </ul>
          </div>
          <div class="tab-content">
            {% for category, power_list in generic_powers_by_category.items %}
            <div role="tabpanel"
                 class="tab-pane {% if forloop.counter0 == 0 %}active{% endif %}"
                 id="{{category.slug}}">
              <div class="panel-body">
                {% if power_list.0 %}
                  <h4 class="css-subcat-header text-muted">
                    Powers
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalpower">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for power_full in power_list.0 %}
                    {{power_full|safe}}
                  {% endfor %}
                {% endif %}
                {% if power_list.1 %}
                  <h4 class="css-subcat-header text-muted">
                    Consumable Crafting
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalcraftable-consumable">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for power_full in power_list.1 %}
                    {{power_full|safe}}
                  {% endfor %}
                {% endif %}
                {% if power_list.2 %}
                  <h4 class="css-subcat-header text-muted">
                    Artifact Crafting
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalcraftable-artifact">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for power_full in power_list.2 %}
                    {{power_full|safe}}
                  {% endfor %}
                {% endif %}
                {% if power_list.3 %}
                  <h4 class="css-subcat-header text-muted">
                    Legendary Artifacts
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalsignature-item-mod">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for item in power_list.3 %}
                    {% render_sig_item item request.user None rewarding_character True %}
                  {% endfor %}
                {% endif %}
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
      <div>
        <i>
          <small>
            Scroll for more Stock Gifts
          </small>
        </i>
      </div>
    </div>



    <!--       Small displays version -->
    <div class="visible-sm-block visible-xs-block">
      <div class = "text-center">
        <h1 style="margin-bottom: 15px;">
          {% if rewarding_character %}
          Select a Stock Gift for {{rewarding_character.name}}
          {% else %}
          Stock Gifts
          <div>
            <small>Example Gifts to take and customize</small>
            <button type="button" class="btn btn-default btn-xs " data-toggle="modal" data-target="#mainTutorialModal">
              Help
            </button>
          </div>
          {% endif %}
        </h1>
      </div>

      <div class="small-section panel-group" id="accordion-generic" role="tablist" aria-multiselectable="false">
        {% for category, power_list in generic_powers_by_category.items %}
          <div class="panel panel-default">
            <div class="scroll-target" style="display:none; position:relative; bottom:100px;"> </div>
            <a class="unstyled-link collapsed" role="button" data-parent="#accordion-generic" data-toggle="collapse" href="#collapse{{category.slug}}" aria-expanded="false" aria-controls="collapse{{category.slug}}">
              <div class = "css-small-header text-center" role="tab" id="{{category.slug}}Heading">
                <h4 class="fake-link">
                  {{category.name}}
                </h4>
                {{category.description}}
              </div>
            </a>
            <div id="collapse{{category.slug}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="{{category.slug}}Heading">
              <div class="panel-body">
                {% if power_list.0 %}
                  <h4 class="text-muted">
                    Powers
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalpower">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for power_full in power_list.0 %}
                    {{power_full|safe}}
                    <br>
                  {% endfor %}
                {% endif %}
                {% if power_list.1 %}
                  <h4 class="text-muted">
                    Consumable Crafting
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalcraftable-consumable">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for power_full in power_list.1 %}
                    {{power_full|safe}}
                    <br>
                  {% endfor %}
                {% endif %}
                {% if power_list.2 %}
                  <h4 class="text-muted">
                    Artifact Crafting
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalcraftable-artifact">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for power_full in power_list.2 %}
                    {{power_full|safe}}
                    <br>
                  {% endfor %}
                {% endif %}
                {% if power_list.3 %}
                  <h4 class="text-muted">
                    Legendary Artifacts
                    <small>
                      <button type="button"  class="btn btn-xs btn-default" data-toggle="modal" data-target="#tutorialModalsignature-item-mod">
                        <i class="fa fa-question-circle fa-lg text-muted"></i>
                      </button>
                    </small>
                  </h4>
                  {% for item in power_list.3 %}
                    {% render_sig_item item request.user None rewarding_character True %}
                    <br>
                  {% endfor %}
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
