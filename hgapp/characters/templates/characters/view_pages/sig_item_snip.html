{% load power_tags %}
{% load bootstrap %}

<div class="css-signature-item js-world-element-container {% if is_greyed_out %}css-sig-item-greyed-out{% endif %}">
    {% if user_can_edit  %}
        <span class="pull-right css-world-element-edit">
            <button class="btn btn-xs btn-default js-edit-world-element-button"
                    data-id="{{item.id}}"
                    data-element-type="artifact"
                    style="margin-right: 5px;">
                <i class="fa fa-edit fa-1x"></i>
            </button>
        </span>
        <span class="pull-right">
            <button class="btn btn-xs btn-default js-transfer-item-button"
                    data-id="{{item.id}}"
                    style="margin-right: 5px; margin-left: 2px;">
                <span class="glyphicon glyphicon-transfer" aria-hidden="true"></span>
            </button>
        </span>
    {% endif %}
  <div class="css-world-entity-value" style="padding-left: 5px; padding-bottom: 5px;">
      <h4 class="text-center css-world-element-name" style="{%if user_can_edit %}padding-left: 50px;padding-right: 55px;{%endif%} margin-top: 0px; font-size: 22px; margin-bottom: 0px;">
          {{item.name}}
      </h4>
      <div class="text-center text-muted">
          <small>
              {{status_blurb|safe}}
              <b><div class="css-reason-unavail">{% if reason_unavail %}{{reason_unavail}}{% endif %}</div></b>
          </small>
      </div>
    <i class="css-system-text-user-input css-world-element-description">{{item.description}}</i>
  </div>
    {% if edit_form and user_can_edit %}
        <form class="js-edit-world-element-form"
              data-edit-world-element-url="{% url 'characters:edit_world_element' item.id 'artifact' secret_key %}"
              style="display:none;">
            <div id="edit-artifact-{{item.id}}" style="margin-bottom: 10px;">
                {{edit_form.name|bootstrap}}
                {{edit_form.description|bootstrap}}
                {% if status_form %}
                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            {{status_form.change_availability|bootstrap}}
                        </div>
                        <div class="col-xs-12 col-sm-6" style="display:none;">
                            {{status_form.notes|bootstrap}}
                        </div>
                    </div>
                {% endif %}
                <div class="text-center">
                    <input type="submit" class="btn btn-primary" value="Save" />
                </div>
            </div>
        </form>
    {% endif %}
  {% for power in item.power_full_set.all %}
    <span class="css-world-element-name">
        {% power_badge power %}
    </span>
  {% endfor %}
    <div id="hx-timeline-item{{item.id}}">
        <button
                class="btn btn-default btn-xs"
                hx-get="{% url 'characters:item_timeline' item.id %}"
                hx-trigger="click"
                hx-target="#hx-timeline-item{{item.id}}"
                hx-swap="outerHTML">
            History
        </button>

    </div>
</div>
